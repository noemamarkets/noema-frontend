<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Noema Financial</title>
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WF1JTBLBKD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-WF1JTBLBKD');
  </script>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { 
      background: #05050f;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'SF Pro Display', sans-serif;
    }
    
    .card { 
      background: rgba(30,30,60,0.6); 
      backdrop-filter: blur(12px);
    }
    
    /* Stock card styles - Apple Stocks inspired */
    .stock-card {
      background: rgba(30,30,60,0.8);
      border-radius: 12px;
      padding: 12px 14px;
      border: 1px solid rgba(255,255,255,0.1);
      position: relative;
      overflow: hidden;
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .stock-card:hover {
      transform: translateY(-2px);
      border-color: rgba(255,255,255,0.2);
    }
    
    /* Top border indicator - MUST be visible */
    .stock-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: #666;
    }
    
    .stock-card.positive::before {
      background: #00ff88 !important;
    }
    
    .stock-card.negative::before {
      background: #ff4757 !important;
    }
    
    .stock-ticker {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: -0.3px;
      color: #fff;
      margin-top: 2px;
    }
    
    .stock-name {
      font-size: 11px;
      color: rgba(255,255,255,0.5);
      margin-top: 2px;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .stock-price {
      font-size: 24px;
      font-weight: 600;
      margin-top: 8px;
      letter-spacing: -0.5px;
      color: #fff;
    }
    
    .stock-change {
      font-size: 13px;
      font-weight: 600;
      margin-top: 4px;
    }
    
    /* Mobile: Show max 4 stocks, scroll for more */
    @media (max-width: 768px) {
      #watchlist-container {
        max-height: calc((12px + 14px + 2px + 18px + 11px + 24px + 13px + 24px) * 2 + 16px);
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }
    }
    
    /* Welcome modal */
    #welcome-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.85);
      backdrop-filter: blur(8px);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .modal-content {
      background: rgba(30,30,60,0.95);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      padding: 40px;
      max-width: 500px;
      width: 100%;
      text-align: center;
    }
    
    .modal-content h1 {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 12px;
    }
    
    .modal-content p {
      font-size: 16px;
      color: rgba(255,255,255,0.7);
      margin-bottom: 32px;
      line-height: 1.5;
    }
    
    .modal-content label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
      text-align: left;
    }
    
    .modal-content input {
      width: 100%;
      padding: 14px;
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 10px;
      color: #fff;
      font-size: 16px;
      margin-bottom: 24px;
    }
    
    .modal-content input:focus {
      outline: none;
      border-color: #00d9ff;
    }
    
    .modal-content button {
      width: 100%;
      padding: 14px;
      background: #00d9ff;
      color: #000;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .modal-content button:hover {
      background: #00b8d4;
      transform: translateY(-2px);
    }
    
    /* Beta badge */
    .beta-badge {
      display: inline-block;
      padding: 4px 12px;
      background: rgba(0,217,255,0.15);
      border: 1px solid rgba(0,217,255,0.3);
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      color: #00d9ff;
      letter-spacing: 0.5px;
    }
    
    /* Pulse section */
    .pulse-container {
      position: relative;
      min-height: 400px;
    }
    
    .pulse-tweet {
      margin-bottom: 16px;
    }
    
    .pulse-tweet.featured {
      background: rgba(0,217,255,0.1);
      border: 2px solid rgba(0,217,255,0.3);
      box-shadow: 0 0 20px rgba(0,217,255,0.15);
    }
    
    .pulse-tweet.standard {
      background: rgba(30,30,60,0.6);
      border: 1px solid rgba(255,255,255,0.1);
    }
    
    /* Loading animation */
    .pulse-anim {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: .5; }
    }
    
    /* Truncated summary */
    .summary-truncated {
      display: -webkit-box;
      -webkit-line-clamp: 4;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .summary-expanded {
      display: block;
    }
    
    /* Smooth transitions */
    * {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
  </style>
</head>
<body class="text-gray-100 min-h-screen">

  <!-- Welcome Modal (first visit only) -->
  <div id="welcome-modal" style="display: none;">
    <div class="modal-content">
      <h1>Welcome to Noema Financial</h1>
      <p>See markets as they are intended. No noise. No ads.</p>
      
      <label for="user-name">What should we call you?</label>
      <input 
        type="text" 
        id="user-name" 
        placeholder="First name"
        maxlength="20"
      >
      
      <button onclick="saveNameAndStart()">Get Started</button>
    </div>
  </div>

  <!-- Top futures bar - Sticky -->
  <div class="fixed top-0 inset-x-0 bg-black/90 backdrop-blur z-50 border-b border-gray-800">
    <div class="max-w-6xl mx-auto px-6 py-3 flex justify-between text-sm font-medium">
      <div class="flex gap-8">
        <span>S&P <b id="spx-futures" class="text-green-400">...</b></span>
        <span>Nasdaq <b id="ndx-futures" class="text-green-400">...</b></span>
        <span>VIX <b id="vix-quote" class="text-red-400">...</b></span>
      </div>
      <div class="flex gap-6 items-center">
        <a href="feedback.html" class="text-cyan-400 hover:text-cyan-300 transition">Beta Feedback</a>
        <span>Bitcoin <b id="btc-quote" class="text-green-400">...</b></span>
        <span class="text-gray-500 text-xs">15-min delayed</span>
      </div>
    </div>
  </div>

  <div class="pt-24 max-w-6xl mx-auto px-6 space-y-10 pb-32">

    <!-- Dynamic greeting -->
    <div class="text-center space-y-3">
      <div class="flex items-center justify-center gap-3">
        <h1 id="greeting" class="text-4xl font-semibold">Good morning</h1>
        <span class="beta-badge">Beta 1.0</span>
      </div>
      <p class="text-xl text-gray-400">
        <span>Your watchlist is </span>
        <span id="watchlist-change" class="font-semibold">calculating...</span>
      </p>
    </div>

    <!-- Watchlist - 2 rows, smaller cards -->
    <div id="watchlist-container" class="grid grid-cols-2 md:grid-cols-5 gap-4">
      <!-- Stock cards will be populated here -->
    </div>

    <!-- Add stock to watchlist - Moved right below stocks -->
    <div class="card rounded-2xl p-6 border border-gray-800">
      <h3 class="text-xl font-bold mb-4">Add to Watchlist</h3>
      <div class="flex gap-3">
        <input 
          type="text" 
          id="stock-input" 
          placeholder="Enter ticker (e.g., AAPL)" 
          class="bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 flex-1 text-white uppercase focus:outline-none focus:border-cyan-500"
          maxlength="5"
        >
        <button 
          onclick="addStock()" 
          class="bg-cyan-600 hover:bg-cyan-700 px-6 py-2 rounded-lg font-medium transition"
        >
          Add
        </button>
      </div>
    </div>

    <!-- Pulse section - Right after add stock -->
    <div class="card rounded-2xl p-8 border border-gray-800">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold">PULSE</h2>
        <span class="text-xs text-gray-500">Live from Fintwit</span>
      </div>
      
      <div id="pulse-section" class="space-y-4">
        <!-- Auto-scrolling tweets will be loaded here -->
      </div>
    </div>

    <!-- AI Summary - Moved down -->
    <div class="card rounded-2xl p-8 border border-gray-800 relative">
      <h2 class="text-2xl font-bold mb-6">What matters today</h2>
      
      <div id="ai-summary" class="text-lg leading-relaxed text-gray-300 relative">
        <div class="pulse-anim">Loading market summary...</div>
      </div>
      
      <button 
        id="summary-expand-btn" 
        class="mt-4 text-cyan-400 hover:text-cyan-300 text-sm font-semibold hidden"
        onclick="toggleSummary()"
      >
        Read more
      </button>
      
      <div class="mt-4 text-xs text-gray-500">
        AI-generated summary powered by Claude + Polygon News
      </div>
    </div>

    <!-- Suggested stocks -->
    <div class="card rounded-2xl p-8 border border-gray-800">
      <h2 class="text-2xl font-bold mb-6">You might like</h2>
      <div id="suggested-stocks" class="grid grid-cols-3 md:grid-cols-6 gap-6 text-center">
        <!-- Suggested stocks will be populated here -->
      </div>
    </div>

  </div>

  <script src="tweets.js"></script>
  <script src="app.js"></script>
</body>
</html>
